from setuptools import setup
from setuptools import find_packages
import os
import glob

_python_dir = os.path.abspath(os.path.dirname(__file__))
os.chdir(_python_dir)
_package_name = "@PY_PACKAGE_NAME@"
_package_version = "0.1.0"

if os.path.exists("requirements.txt"):
    with open("requirements.txt", "r") as f:
        requires = f.readlines()
else:
    requires = []

entry_point_files = glob.glob("./@PY_PACKAGE_NAME@/**/entry_points.txt")
entry_points = []
for entry_point_file in entry_point_files:
    with open(entry_point_file, "r") as f:
        entry_points.extend(f.readlines())
for i, entry_point in enumerate(entry_points):
    entry_points[i] = entry_point.strip()

setup(
    name=_package_name,
    version=_package_version,
    author="Zhirui Dai",
    author_email="zhdai@eng.ucsd.edu",
    install_requires=requires,
    packages=find_packages(),
    include_package_data=True,
    entry_points={"console_scripts": entry_points},
)
